{% extends "base.html" %}
{% block content %}
<h1>Dashboard</h1>

<div class="charts">
  <div class="chart">
    <h2>Monthly Sales</h2>
    <canvas id="salesLine"></canvas>
  </div>
  <div class="chart">
    <h2>Top Products</h2>
    <canvas id="productPie"></canvas>
  </div>
</div>

<script>
  // Line Chart
  const ctxLine = document.getElementById('salesLine').getContext('2d');
  new Chart(ctxLine, {
    type: 'line',
    data: {
      labels: {{ monthly_labels|tojson }},
      datasets: [{
        label: 'Sales ($)',
        data: {{ monthly_totals|tojson }},
        borderColor: 'blue',
        fill: false
      }]
    }
  });

  // Pie Chart
  const ctxPie = document.getElementById('productPie').getContext('2d');
  new Chart(ctxPie, {
    type: 'pie',
    data: {
      labels: {{ product_labels|tojson }},
      datasets: [{
        data: {{ product_totals|tojson }},
        backgroundColor: ['red','blue','green','orange','purple','cyan']
      }]
    }
  });
</script>
{% endblock %}
